var Floodgate=function(e,t){"use strict";!function(){function e(e){this.value=e}function t(t){function n(o,a){try{var i=t[o](a),l=i.value;l instanceof e?Promise.resolve(l.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(i.done?"return":"normal",i.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?n(o.key,o.arg):a=null}var o,a;this._invoke=function(e,t){return new Promise(function(r,i){var l={key:e,arg:t,resolve:r,reject:i,next:null};a?a=a.next=l:(o=a=l,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},i=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},l=regeneratorRuntime.mark(function e(t,n,r){var o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<=t.length-1)){e.next=8;break}return a=0===o,e.next=5,[].concat(i(t)).splice(o,a&&r>=0?r:n);case 5:o=a&&r>=0?o+r:o+n,e.next=1;break;case 8:case"end":return e.stop()}},e,this)}),u=function(e){function t(e){n(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.data,i=e.increment,u=e.initial;return r.queue=l(o,i,u),r.data=o,r.state={renderedItems:[],allItemsRendered:!1},r.loadAll=r.loadAll.bind(r),r.loadNext=r.loadNext.bind(r),r.reset=r.reset.bind(r),r}return o(t,e),r(t,[{key:"componentDidMount",value:function(){this.loadNext()}},{key:"reset",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).callback;this.queue=l(this.data,this.props.increment,this.props.initial),this.setState(function(e){return{renderedItems:[],allItemsRendered:!1}},function(){return e.loadNext({callback:t})})}},{key:"loadAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{suppressWarning:!1},n=t.callback,r=t.suppressWarning;!this.state.allItemsRendered&&this.setState(function(t){return{renderedItems:e.data,allItemsRendered:!0}},function(){return n&&n(e.state)})||this.state.allItemsRendered&&!r&&console.warn("Floodgate: All items are rendered")}},{key:"loadNext",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).callback;!this.state.allItemsRendered&&this.setState(function(t){var n=e.queue.next().value,r=null!==n&&void 0!==n&&n.length>0,o=[].concat(i(t.renderedItems),i(r?n:[])),a=o.length===e.data.length;return{renderedItems:o,allItemsRendered:!!(!r||r&&a)}},function(){return t&&t(e.state)})}},{key:"render",value:function(){var e=this.loadAll,t=this.loadNext,n=this.reset,r=this.state,o=r.renderedItems,a=r.allItemsRendered;return this.props.children({items:o,loadComplete:a,loadAll:e,loadNext:t,reset:n})}}]),t}(e.Component);return u.propTypes={children:t.func,data:t.array.isRequired,initial:t.number,increment:t.number},u.defaultProps={initial:5,increment:5},u}(React,PropTypes);

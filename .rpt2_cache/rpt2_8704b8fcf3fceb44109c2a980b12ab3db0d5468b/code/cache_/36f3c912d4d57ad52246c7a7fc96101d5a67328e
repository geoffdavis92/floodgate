{"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/index.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { generator } from \"functions\";\r\nclass Floodgate extends Component {\r\n    // methods\r\n    constructor(props) {\r\n        super();\r\n        this.queue = generator(props.data, props.increment, props.initial);\r\n        this.data = props.data;\r\n        this.state = {\r\n            renderedItems: [],\r\n            allItemsRendered: false\r\n        };\r\n        this.loadAll = this.loadAll.bind(this);\r\n        this.loadNext = this.loadNext.bind(this);\r\n        this.reset = this.reset.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        this.loadNext();\r\n    }\r\n    reset({ callback } = {}) {\r\n        this.queue = generator(this.data, this.props.increment, this.props.initial);\r\n        this.setState(prevState => ({\r\n            renderedItems: [],\r\n            allItemsRendered: false\r\n        }), () => this.loadNext({ callback }));\r\n    }\r\n    loadAll({ callback, suppressWarning } = {\r\n        suppressWarning: false\r\n    }) {\r\n        (!this.state.allItemsRendered &&\r\n            this.setState(prevState => {\r\n                return {\r\n                    renderedItems: this.data,\r\n                    allItemsRendered: true\r\n                };\r\n            }, () => callback && callback(this.state))) ||\r\n            (this.state.allItemsRendered &&\r\n                !suppressWarning &&\r\n                console.warn(\"Floodgate: All items are rendered\"));\r\n    }\r\n    loadNext({ callback } = {}) {\r\n        !this.state.allItemsRendered &&\r\n            this.setState(prevState => {\r\n                const { value, done } = this.queue.next();\r\n                const valueIsAvailable = value !== null && value !== undefined && value.length > 0;\r\n                const newRenderedData = [\r\n                    ...prevState.renderedItems,\r\n                    ...(valueIsAvailable ? value : [])\r\n                ];\r\n                const dataLengthMatches = newRenderedData.length === this.data.length;\r\n                return {\r\n                    renderedItems: newRenderedData,\r\n                    allItemsRendered: !valueIsAvailable || (valueIsAvailable && dataLengthMatches)\r\n                        ? true\r\n                        : false\r\n                };\r\n            }, () => callback && callback(this.state));\r\n    }\r\n    render() {\r\n        const { loadAll, loadNext, reset } = this;\r\n        const { renderedItems, allItemsRendered } = this.state;\r\n        return this.props.children({\r\n            items: renderedItems,\r\n            loadComplete: allItemsRendered,\r\n            loadAll,\r\n            loadNext,\r\n            reset\r\n        });\r\n    }\r\n}\r\n// static props\r\nFloodgate.propTypes = {\r\n    data: PropTypes.array.isRequired,\r\n    initial: PropTypes.number,\r\n    increment: PropTypes.number\r\n};\r\nFloodgate.defaultProps = {\r\n    initial: 5,\r\n    increment: 5\r\n};\r\nexport default Floodgate;\r\n//# sourceMappingURL=index.js.map"}
